<div class="order-list">
  <h2>DANH SÁCH ĐƠN ĐẶT HÀNG</h2>
  <div class="row justify-content-end">
    <div class="col-6 text-right">
      <div class="dropdown">
        <button
          class="btn btn-primary dropdown-toggle"
          type="button"
          id="statusDropdown"
          data-toggle="dropdown"
          aria-haspopup="true"
          aria-expanded="false"
        >
          Chọn trạng thái
        </button>
        <div
          class="dropdown-menu dropdown-menu-right"
          aria-labelledby="statusDropdown"
        >
        <button class="dropdown-item" (click)="allOrder()">
          Tất cả
        </button>
          <button class="dropdown-item" (click)="getOrdersByStatus(0)">
            Chờ xử lý
          </button>
          <button class="dropdown-item" (click)="getOrdersByStatus(1)">
            Đang xử lý
          </button>
          <button class="dropdown-item" (click)="getOrdersByStatus(2)">
            Đã xử lý
          </button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="orders.length > 0">
    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th>STT</th>
          <th>Tên</th>
          <th>Số điện thoại</th>
          <th>Email</th>
          <th>Nội dung</th>
          <th>Trạng thái</th>
          <th>Tên xe</th>
          <th>Phiên bản</th>
          <th>Năm sản xuất</th>
          <th>Kiểu dáng</th>
          <th>Tình trạng</th>
          <th>Hành động</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders; let i = index" class="order-item">
          <td>{{ i + 1 }}</td>
          <td>{{ order.nameUser }}</td>
          <td>{{ order.phoneNumber }}</td>
          <td>{{ order.email }}</td>
          <td>{{ order.text }}</td>
          <td>
            <span *ngIf="order.status === 0" class="text-warning"
              >Chờ xử lý</span
            >
            <span *ngIf="order.status === 1" class="text-primary"
              >Đang xử lý</span
            >
            <span *ngIf="order.status === 2" class="text-success"
              >Đã xử lý</span
            >
          </td>
          <td>{{ order.car?.ten }}</td>
          <td>{{ order.car?.phienBan }}</td>
          <td>{{ order.car?.namSanXuat }}</td>
          <td>{{ order.car?.kieuDang }}</td>
          <td>{{ order.car?.tinhTrang }}</td>
          <td>
            <select class="form-control" [(ngModel)]="selectedStatus">
              <option value="0">Chờ xử lý</option>
              <option value="1">Đang xử lý</option>
              <option value="2">Đã xử lý</option>
            </select>
            <button
              class="btn btn-primary ml-2"
              (click)="updateStatus(order.id)"
            >
              Cập nhật trạng thái
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="orders.length === 0">
    <p class="text-muted">Hôm nay là một ngày vui</p>
  </div>
</div>
